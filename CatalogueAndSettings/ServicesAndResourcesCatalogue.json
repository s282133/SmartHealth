{
  "server_host": "127.0.0.1",
  "server_port": 8080,
  "services": [
    {
      "service_name": "ResourceService",
      "description": "Servizio per la registrazione di dottori e pazienti",
      "host": "127.0.0.1",
      "port": 8080,
      "APIs": [
        {
          "functionality_name": "registrazione_dottore",
          "description": "Form per la registrazione del dottore",
          "access_mode": "GET",
          "uri": "registrazione_dottore?chat_ID={{chat_ID}}"
        },
        {
          "functionality_name": "registrazione_paziente",
          "description": "Form per la registrazione del paziente",
          "access_mode": "GET",
          "uri": "registrazione_paziente?chat_ID={{chat_ID}}"
        },
        {
          "functionality_name": "tabella_pazienti",
          "description": "Form per visualizzare i pazienti del dottore in tabella",
          "access_mode": "GET",
          "uri": "tabella_pazienti"
        },
        {
          "functionality_name": "get_raspberry_parameters",
          "description": "Mandare al raspberry il servizio da utilizzare",
          "access_mode": "GET",
          "uri": "get_raspberry_parameters"
        },
        {
          "functionality_name": "monitoring_state",
          "description": "M",
          "access_mode": "GET",
          "uri": "monitoring_state?patient_id={{patient_ID}}"
        },
        {
          "functionality_name": "retrieve_pregnancy_day_one",
          "description": "M",
          "access_mode": "GET",
          "uri": "pregnancy_state?patient_id={{patient_ID}}"
        },
        {
          "functionality_name": "get_name_from_clientID",
          "description": "M",
          "access_mode": "GET",
          "uri": "get_name_from_id?patient_id={{patient_ID}}"
        },
        {
          "functionality_name": "find_doctor_telegram_id_from_patient_id",
          "description": "M",
          "access_mode": "GET",
          "uri": "get_telegram_from_id?patient_id={{patient_ID}}"
        },
        {
          "functionality_name": "set_monitoring_state_from_client_ID",
          "description": "M",
          "access_mode": "GET",
          "uri": "set_monitoring_by_id?patient_id={{patient_ID}}&monitoring={{monitoring}}"
        },
        {
          "functionality_name": "find_patient_from_chat_ID",
          "description": "M",
          "access_mode": "GET",
          "uri": "find_patient_by_chat_id?chat_id={{chat_ID}}"
        },
        {
          "functionality_name": "retrieve_TS_write_API_from_client_ID",
          "description": "M",
          "access_mode": "GET",
          "uri": "get_ts_from_id?patient_id={{patient_ID}}"
        },
        {
          "functionality_name": "get_lista_pazienti_simulati",
          "description": "M",
          "access_mode": "GET",
          "uri": "get_lista_pazienti_simulati"
        },
        {
          "functionality_name": "contolla_scadenza_week",
          "description": "M",
          "access_mode": "GET",
          "uri": "contolla_scadenza_week"
        },
        {
          "functionality_name": "lista_pazienti_da_monitorare",
          "description": "M",
          "access_mode": "GET",
          "uri": "lista_pazienti_da_monitorare"
        },
        {
          "functionality_name": "set_patient_in_monitoring",
          "description": "M",
          "access_mode": "GET",
          "uri": "set_patient_in_monitoring?patient_id={{patient_ID}}"
        },
        {
          "functionality_name": "update_chat_id",
          "description": "Aggiornamento chat id del paziente",
          "access_mode": "PUT",
          "uri": "update_telegram_id?patient_id={{message}}&chat_id={{chat_ID}}"
        },
        {
          "functionality_name": "doctors",
          "description": "Registrazione nel catalogo del dottore (usata da doctors.html)",
          "access_mode": "POST",
          "uri": "doctors"
        },
        {
          "functionality_name": "patients",
          "description": "Registrazione nel catalogo del paziente (usata da patients.html)",
          "access_mode": "POST",
          "uri": "patients"
        }
      ]
    },
    {
      "service_name": "PatientRegistrationOnRaspberry",
      "description": "Associa il raspberry al paziente appena registrato",
      "host": "192.168.1.254",
      "port": 8080,
      "APIs": [
        {
          "functionality_name": "updatepatient",
          "description": "Registrazione in un file json sul raspberry l'ID del paziente",
          "access_mode": "POST",
          "json_post": "{ \"ClientID\": {{NewPatientID}} }",
          "uri": "updatepatient"
        }
      ]
    },
    {
      "service_name": "MQTT_analysis",
      "description": "Servizio utilizzato per l'invio dei dati in analisi",
      "broker": "broker.hivemq.com",
      "port": 1883,
      "base_topic": "P4IoT/SmartHealth",
      "APIs": [
        {
          "functionality_name": "send_temperature",
          "description": "Invio delle temperature simulate e non dei pazienti",
          "topic": "{{base_topic}}/{{patientID}}/temp_raspberry"
        },
        {
          "functionality_name": "send_measure",
          "description": "Invio dei dati misurati sul paziente",
          "topic_temperature": "{{base_topic}}/{{patientID}}/temperature",
          "topic_heartrate": "{{base_topic}}/{{patientID}}/heartrate",
          "topic_pressure": "{{base_topic}}/{{patientID}}/pressure",
          "topic_glycemia": "{{base_topic}}/{{patientID}}/glycemia"
        },
        {
          "functionality_name": "monitoring_on",
          "description": "Attivazione del monitoring",
          "topic": "{{base_topic}}/{{patientID}}/monitoring"
        },
        {
          "functionality_name": "send_alert",
          "description": "Invio di un messaggio di allerta",
          "topic": "{{base_topic}}/{{patientID}}/send_alert"
        },
        {
          "functionality_name": "receive_alert",
          "description": "Monitoring dei messaggi di allerta",
          "topic": "{{base_topic}}/+/send_alert"
        },
        {
          "functionality_name": "heartrate",
          "description": "Posta heartrate",
          "topic": "{{base_topic}}/{{patientID}}/heartrate"
        },
        {
          "functionality_name": "temperature",
          "description": "Posta temperature",
          "topic": "{{base_topic}}/{{patientID}}/temperature"
        },
        {
          "functionality_name": "glycemia",
          "description": "Posta glycemia",
          "topic": "{{base_topic}}/{{patientID}}/glycemia"
        },
        {
          "functionality_name": "pressure",
          "description": "Posta pressure",
          "topic": "{{base_topic}}/{{patientID}}/pressure"
        }
      ]
    },
    {
      "service_name": "TelegramDoctor",
      "doctorTelegramToken": "5373152293:AAESoB5LMU3JUunXegFryWk484twuniHinE",
      "APIs": []
    },
    {
      "service_name": "TelegramClient",
      "patientTelegramToken": "5156513440:AAEpBKPKf2curml2BNurrhGzQTE_kdHF45U",
      "APIs": [
        {
          "functionality_name": "send_peso",
          "description": "Invio del peso del paziente",
          "topic": "{{base_topic}}/{{patientID}}/peso"
        }
      ]
    },
    {
      "service_name": "NodeRed",
      "host": "abc",
      "APIs": [
        {
          "functionality_name": "abc",
          "description": "abc",
          "topic": "abc"
        }
      ]
    },
    {
      "service_name": "Thingspeak",
      "description": "Adattatore per comuniazione e recezione dei dati da Thingspeak",
      "broker": "broker.hivemq.com",
      "port": 1883,
      "base_topic": "P4IoT/SmartHealth",
      "APIs": [
        {
          "functionality_name": "send_data_to_thingspeak",
          "description": "Invio dei dati su thingspeak",
          "topic_temperature": "{{base_topic}}/+/temperature",
          "topic_heartrate": "{{base_topic}}/+/heartrate",
          "topic_pressure": "{{base_topic}}/+/pressure",
          "topic_glycemia": "{{base_topic}}/+/glycemia",
          "topic_peso": "{{base_topic}}/+/peso",
          "topic_monitoring": "{{base_topic}}/+/monitoring"
        }
      ]
    },
    {
      "service_name": "Weekly_statistics",
      "description": "Calcola le statistiche settimanali da mandare a nodered",
      "broker": "broker.hivemq.com",
      "port": 1883,
      "base_topic": "P4IoT/SmartHealth",
      "APIs": [
        {
          "functionality_name": "send_statistics",
          "description": "Invio delle staitistiche a nodered",
          "topic_statistic": "{{base_topic}}/+/statistic"
        }
      ]
    }
  ],
  "resourceState": {
    "LastPatientID": 8,
    "LastDoctorID": 3
  },
  "resources": [
    {
      "doctorID": 1,
      "doctorName": "Perry",
      "doctorSurname": "Cox",
      "doctorMail": "perrycox@scrubs.com",
      "lastUpdate": "2022-07-04",
      "connectedDevice": {
        "telegramID": 298694124
      },
      "patientList": [
        {
          "patientID": 3,
          "patientName": "Robin",
          "patientSurname": "Scherbatsky",
          "personalData": {
            "taxIDcode": "RBNSCH",
            "userEmail": "robin@himym.com",
            "pregnancyDayOne": "2022-05-29"
          },
          "idRegistratoSuRaspberry": "no",
          "state": "attivo",
          "monitoring": "off",
          "connectedDevice": {
            "deviceName": "rpi98",
            "onlineSince": "2022-07-14",
            "telegramID": "786029508",
            "thingspeakInfo": {
              "channel": 1788970,
              "apikeys": [
                "FRN2A7XGJHIUSN24",
                "ZDNDUY17T8SJSXRM"
              ]
            }
          }
        }
      ],
      "devicesList": [
        {
          "deviceName": "rpi98",
          "patientID": 3,
          "measureType": [
            "Temperature",
            "Battito cardiaco",
            "Pressione",
            "Glicemia"
          ],
          "availableServices": [
            "raspberry_mqtt",
            "raspberry_rest"
          ],
          "activeService": "application_to_raspberry",
          "activeProtocol": "mqtt",
          "lastUpdate": "2022-07-04"
        }
      ]
    },
    {
      "doctorID": 2,
      "doctorName": "Giulia",
      "doctorSurname": "Codagnone",
      "doctorMail": "perrycox@scrubs.com",
      "lastUpdate": "2022-07-04",
      "connectedDevice": {
        "telegramID": 786029508
      },
      "patientList": [
        {
          "patientID": 1,
          "patientName": "Laura",
          "patientSurname": "Cubeddu",
          "personalData": {
            "taxIDcode": "RBNSCH",
            "userEmail": "robin@himym.com",
            "pregnancyDayOne": "2022-05-29"
          },
          "idRegistratoSuRaspberry": "yes",
          "state": "attivo",
          "monitoring": "off",
          "connectedDevice": {
            "deviceName": "rpi98",
            "onlineSince": "2022-07-28",
            "telegramID": "786029508",
            "thingspeakInfo": {
              "channel": 1788970,
              "apikeys": [
                "FRN2A7XGJHIUSN24",
                "ZDNDUY17T8SJSXRM"
              ]
            }
          }
        },
        {
          "patientID": 6,
          "patientName": "Paola",
          "patientSurname": "Rossi",
          "personalData": {
            "taxIDcode": "ABCDEFGH",
            "userEmail": "mario.rossi@gmail.com",
            "pregnancyDayOne": "2022-05-03"
          },
          "idRegistratoSuRaspberry": "no",
          "state": "attivo",
          "monitoring": "off",
          "connectedDevice": {
            "deviceName": "raspberry22",
            "onlineSince": "2022-07-20",
            "telegramID": 298694124,
            "thingspeakInfo": {
              "channel": 1800231,
              "apikeys": [
                "9A2YVSENL1ZNPVWO",
                "K3QUNSX7XZE3R4T6"
              ]
            }
          }
        },
        {
          "patientID": 8,
          "patientName": "Elena",
          "patientSurname": "Codagnone",
          "personalData": {
            "taxIDcode": "ABCDEFGH",
            "userEmail": "giulia.codagnone@gmail.com",
            "pregnancyDayOne": "2022-05-03"
          },
          "idRegistratoSuRaspberry": "no",
          "state": "attivo",
          "monitoring": "off",
          "connectedDevice": {
            "deviceName": "raspberry22",
            "onlineSince": "2022-07-19",
            "telegramID": "786029508",
            "thingspeakInfo": {
              "channel": 1805232,
              "apikeys": [
                "L7CLJZHIYLH36PUQ",
                "272EVT8TO9JOA783"
              ]
            }
          }
        }
      ],
      "devicesList": [
        {
          "deviceName": "rpi98",
          "patientID": 1,
          "measureType": [
            "Temperature",
            "Battito cardiaco",
            "Pressione",
            "Glicemia"
          ],
          "availableServices": [
            "raspberry_mqtt",
            "raspberry_rest"
          ],
          "activeService": "application_to_raspberry",
          "activeProtocol": "mqtt",
          "lastUpdate": "2022-07-04"
        },
        {
          "deviceName": "raspberry22",
          "patientID": 6,
          "measureType": [
            "Temperature",
            "Battito cardiaco",
            "Pressione",
            "Glicemia"
          ],
          "availableServices": [
            "raspberry_mqtt",
            "raspberry_rest"
          ],
          "activeService": "application_to_raspberry",
          "activeProtocol": "mqtt",
          "lastUpdate": "2022-07-14"
        },
        {
          "deviceName": "raspberry22",
          "patientID": 8,
          "measureType": [
            "Temperature",
            "Battito cardiaco",
            "Pressione",
            "Glicemia"
          ],
          "availableServices": [
            "raspberry_mqtt",
            "raspberry_rest"
          ],
          "activeService": "application_to_raspberry",
          "activeProtocol": "mqtt",
          "lastUpdate": "2022-07-19"
        }
      ]
    }
  ]
}